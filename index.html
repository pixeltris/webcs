<html>
    <meta charset="utf-8"/>
    <title>webcs</title>
    <link rel="stylesheet" type="text/css" href="ui/font-awesome/css/font-awesome.min.css"><!--4.7.0 | https://fontawesome.com/v4.7.0/get-started/-->
    <link rel="stylesheet" type="text/css" href="ui/phosphor-dockpanel-dark.css" id="phosphor-dockpanel-theme">
    <link rel="stylesheet" type="text/css" href="ui/phosphor-menu-dark.css" id="phosphor-menu-theme">
    <link rel="stylesheet" type="text/css" href="ui/xterm.css"><!--4.10.0 | https://www.jsdelivr.com/package/npm/xterm-->
    <script type="text/javascript" src="ui/xterm.js"></script><!--4.10.0 | https://www.jsdelivr.com/package/npm/xterm-->
    <script type="text/javascript" src="ui/xterm-addon-fit.js"></script><!--0.5.0 | https://www.jsdelivr.com/package/npm/xterm-addon-fit-->
    <script type="text/javascript" src="ui/xterm-controller.js"></script>
    <script type="text/javascript" src="ui/xterm-commands.js"></script>
    <script type="text/javascript" src="ui/compression/compression.js"></script>
    <script type="text/javascript" src="ui/compression/jszip.min.js"></script><!--/ui/compression/README.md-->
    <script type="text/javascript" src="ui/require.min.js"></script><!--2.3.6 | https://requirejs.org/docs/download.html-->
    <script type="text/javascript" src="ui/phosphor-dockpanel-menu.js"></script><!--https://phosphorjs.github.io/examples/dockpanel/bundle.js + https://phosphorjs.github.io/examples/menus/bundle.js (see https://phosphorjs.github.io/examples.html)-->
    <script type="text/javascript" src="ui/ui.js"></script>
    <script type="text/javascript" src="ui/ui-theme.js"></script>
    <script async type="text/javascript" src="mono/dotnet.js"></script><!--/mono/README.md-->
    <script type="text/javascript" src="mono/dotnet-extra.js"></script>
    <script>
        if (typeof WebAssembly === 'undefined') {
            alert('Your web browser does not support WebAssembly.');
            throw 'No wasm';
        }
        
        // Basic info about this project (displayed on first terminal open / other places which provide links to the repo)
        var webProjectName = 'webcs';
        var webProjectVersion = '1.1';
        var webProjectRepoUrl = 'https://github.com/pixeltris/webcs';
        var webProjectRepoDefaultBranch = 'master';
        var webProjectRuntimeVersion = '6.0.1';
        
        <!--0.29.1 | https://www.jsdelivr.com/package/npm/monaco-editor-->
        var locPath = window.location.origin + window.location.pathname;// TODO: Improve this...
        require.config({ paths: { 'vs': locPath + 'ui/monaco-editor/min/vs' }});
        let monacoProxy = URL.createObjectURL(new Blob([`
            self.MonacoEnvironment = {
                baseUrl: '${locPath}ui/monaco-editor/min/'
            };
            importScripts('${locPath}ui/monaco-editor/min/vs/base/worker/workerMain.js');
        `], { type: 'text/javascript' }));
        window.MonacoEnvironment = { getWorkerUrl: () => monacoProxy };
        
        // Set the runtime initialization callback (invoked by dotnet.js - we'll do our own mono loading in dotnet-extra.js)
        window.Module = {
            onRuntimeInitialized: function() {
                WebcsInterop.init();// Inits .NET and then calls initUI()
                require(['vs/editor/editor.main']);// Should be async, but it does seem to slightly slow down loading doing it here
            }
        };
        
        // Set up a page load handler to update the loading progress text
        window.addEventListener('load', function() {
            WebcsInterop.onPageLoad();
        });
    </script>
    <noscript>
        <style>
            #pageLoadingDiv{display:none;}
            body{padding:5px}
            a{color:inherit;}
        </style>
        <body>JavaScript required</br></br><a href="https://github.com/pixeltris/webcs">https://github.com/pixeltris/webcs</a></body>
    </noscript>
    <div id='pageLoadingDiv'>Loading...</div>
</html>